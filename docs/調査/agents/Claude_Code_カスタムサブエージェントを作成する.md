# Claude Code でカスタムサブエージェントを作成する

## 記事URL
https://azukiazusa.dev/blog/create-custom-sub-agent-in-claude-code

## 記事の概要
Claude Codeで特定のタスクを処理するカスタムサブエージェントの作成方法を解説。サブエージェントはメインの会話セッションとは独立したコンテキストウィンドウを持ち、特定のタスクに特化した処理を行える。

## 記載されているTipsやテクニック

### サブエージェントの作成方法
1. `/agents` コマンドを使用
2. プロジェクト単位または個人単位で作成可能
3. 作成方法は2つ：
   - `Generate with Claude`: AIが自動生成
   - `Manual configuration`: 手動で設定

### 設定ファイルの構造
```yaml
name: pr-creator
description: Creates PRs by comparing the feature branch to main
color: green
system: |
  You are tasked with creating PRs...
```

### 実践的なベストプラクティス
1. **小さく単一責任のエージェントを作成**
   - 1つのタスクに特化
   - 複雑さを避ける

2. **呼び出されやすくする工夫**
   - `description` に "PROACTIVELY" や "MUST BE USED" を含める
   - Claude本体がエージェントを使用する判断材料になる

3. **ツール権限の設定**
   - 各サブエージェントに異なるツールや権限を設定可能
   - タスクに必要な最小限の権限を付与

4. **エージェント定義の例**
   - GitHub PRを作成するサブエージェント
   - 特定の技術スタックに特化したエージェント

## 着目点（なぜこの記事を共有したか）
- カスタムサブエージェントの具体的な作成手順が明確
- 実践的なTipsが豊富（特に呼び出されやすくする工夫）
- プロジェクト固有のタスクを効率化できる可能性

## 実践可能な内容の抽出

### 1. コードレビューエージェント
プロジェクトのコーディング規約に基づいてコードレビューを行う

### 2. テスト作成エージェント
既存のテストパターンを学習して新規テストを作成

### 3. ドキュメント生成エージェント
プロジェクト固有のドキュメント形式で自動生成

### 4. デプロイエージェント
環境固有のデプロイプロセスを自動化

## 注意点と制限事項
1. **コンテキストの制限**
   - メインセッションのコンテキストは共有されない
   - 必要な情報は明示的に渡す必要がある

2. **効率性の考慮**
   - 常にサブエージェントに委任することが効率的とは限らない
   - コンテキスト収集に時間がかかる可能性

3. **使用判断の基準**
   - 独立したタスクに適している
   - メインセッションのコンテキストが不要な場合に有効